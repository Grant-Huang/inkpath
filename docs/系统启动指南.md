# å¢¨å¾„ (InkPath) ç³»ç»Ÿå¯åŠ¨æŒ‡å—

## ğŸ“‹ å‰ç½®è¦æ±‚

### å¿…éœ€è½¯ä»¶
- âœ… Python 3.13.2+
- âœ… Docker Desktop (ç”¨äºæ•°æ®åº“å’ŒRedis)
- âœ… Node.js 18+ (ç”¨äºå‰ç«¯æµ‹è¯•ï¼Œå¯é€‰)

### æ£€æŸ¥ç¯å¢ƒ
```bash
# æ£€æŸ¥Pythonç‰ˆæœ¬
python3 --version

# æ£€æŸ¥Docker
docker --version
docker-compose --version

# æ£€æŸ¥Node.js (å¯é€‰)
node --version
```

## ğŸš€ å¿«é€Ÿå¯åŠ¨ï¼ˆæ¨èï¼‰

### ä¸€é”®å¯åŠ¨è„šæœ¬

```bash
# 1. å¯åŠ¨æ•°æ®åº“å’ŒRedis
./scripts/start_db.sh

# 2. è¿è¡Œæ•°æ®åº“è¿ç§»
alembic upgrade head

# 3. å¯åŠ¨åç«¯æœåŠ¡å™¨
./scripts/start_server.sh
```

## ğŸ“ è¯¦ç»†å¯åŠ¨æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šç¯å¢ƒå‡†å¤‡

#### 1.1 åˆ›å»ºå¹¶æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
python3 -m venv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source venv/bin/activate  # macOS/Linux
# æˆ–
venv\Scripts\activate  # Windows
```

#### 1.2 å®‰è£…Pythonä¾èµ–
```bash
pip install -r requirements.txt
```

#### 1.3 é…ç½®ç¯å¢ƒå˜é‡
```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp .env.example .env

# ç¼–è¾‘ .env æ–‡ä»¶ï¼ˆå¦‚æœéœ€è¦è‡ªå®šä¹‰é…ç½®ï¼‰
# é»˜è®¤é…ç½®é€šå¸¸å¯ä»¥ç›´æ¥ä½¿ç”¨
```

### ç¬¬äºŒæ­¥ï¼šå¯åŠ¨æ•°æ®åº“æœåŠ¡

#### æ–¹å¼1ï¼šä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰
```bash
# ç¡®ä¿Docker Desktopå·²å¯åŠ¨
open -a Docker  # macOS

# è¿è¡Œå¯åŠ¨è„šæœ¬
./scripts/start_db.sh
```

#### æ–¹å¼2ï¼šæ‰‹åŠ¨å¯åŠ¨
```bash
# 1. å¯åŠ¨Docker Desktopï¼ˆå¦‚æœæœªè¿è¡Œï¼‰
open -a Docker  # macOS

# 2. å¯åŠ¨PostgreSQLå’ŒRediså®¹å™¨
docker-compose up -d postgres redis

# 3. ç­‰å¾…æ•°æ®åº“å¯åŠ¨ï¼ˆçº¦10ç§’ï¼‰
sleep 10

# 4. æµ‹è¯•æ•°æ®åº“è¿æ¥
python scripts/test_db_connection.py
```

**æ•°æ®åº“é…ç½®ä¿¡æ¯**ï¼ˆé»˜è®¤ï¼‰ï¼š
- PostgreSQL: `localhost:5432`
- ç”¨æˆ·å: `inkpath`
- å¯†ç : `inkpath_dev`
- æ•°æ®åº“å: `inkpath`
- Redis: `localhost:6379`

### ç¬¬ä¸‰æ­¥ï¼šè¿è¡Œæ•°æ®åº“è¿ç§»

```bash
# åº”ç”¨æ‰€æœ‰æ•°æ®åº“è¿ç§»
alembic upgrade head

# æŸ¥çœ‹è¿ç§»å†å²
alembic history

# æŸ¥çœ‹å½“å‰ç‰ˆæœ¬
alembic current
```

### ç¬¬å››æ­¥ï¼šå¯åŠ¨åç«¯æœåŠ¡å™¨

#### æ–¹å¼1ï¼šä½¿ç”¨å¯åŠ¨è„šæœ¬
```bash
./scripts/start_server.sh
```

#### æ–¹å¼2ï¼šç›´æ¥è¿è¡Œ
```bash
# ç¡®ä¿è™šæ‹Ÿç¯å¢ƒå·²æ¿€æ´»
source venv/bin/activate

# è®¾ç½®Pythonè·¯å¾„
export PYTHONPATH="$(pwd):$PYTHONPATH"

# å¯åŠ¨æœåŠ¡å™¨
python src/app.py
```

#### æ–¹å¼3ï¼šä½¿ç”¨Flaskå‘½ä»¤
```bash
flask run
```

**æœåŠ¡å™¨ä¿¡æ¯**ï¼š
- é»˜è®¤ç«¯å£: `5001` (é¿å…ä¸AirPlayå†²çª)
- è®¿é—®åœ°å€: `http://localhost:5001`
- APIå¥åº·æ£€æŸ¥: `http://localhost:5001/api/v1/health`

### ç¬¬äº”æ­¥ï¼šå¯åŠ¨å‰ç«¯ï¼ˆå¯é€‰ï¼‰

#### Demoå‰ç«¯ï¼ˆé™æ€æ–‡ä»¶ï¼‰
```bash
# åœ¨demoç›®å½•ä¸‹å¯åŠ¨é™æ€æœåŠ¡å™¨
cd demo
python -m http.server 8000
```

è®¿é—®åœ°å€: `http://localhost:8000/index.html`

## ğŸ” éªŒè¯ç³»ç»Ÿè¿è¡Œ

### æ£€æŸ¥åç«¯æœåŠ¡
```bash
# æµ‹è¯•å¥åº·æ£€æŸ¥æ¥å£
curl http://localhost:5001/api/v1/health

# æˆ–ä½¿ç”¨æµè§ˆå™¨è®¿é—®
open http://localhost:5001/api/v1/health
```

### æ£€æŸ¥æ•°æ®åº“è¿æ¥
```bash
python scripts/test_db_connection.py
```

### æ£€æŸ¥Redisè¿æ¥
```bash
redis-cli ping
# åº”è¯¥è¿”å›: PONG
```

## ğŸ“Š å¯åŠ¨é¡ºåºæ€»ç»“

```
1. Docker Desktop âœ…
   â†“
2. æ•°æ®åº“å’ŒRedis (./scripts/start_db.sh) âœ…
   â†“
3. æ•°æ®åº“è¿ç§» (alembic upgrade head) âœ…
   â†“
4. åç«¯æœåŠ¡å™¨ (./scripts/start_server.sh) âœ…
   â†“
5. å‰ç«¯Demo (å¯é€‰ï¼Œcd demo && python -m http.server 8000) âœ…
```

## ğŸ› ï¸ å¸¸ç”¨å‘½ä»¤

### å¯åŠ¨ç›¸å…³
```bash
# å¯åŠ¨æ•°æ®åº“
./scripts/start_db.sh

# å¯åŠ¨åç«¯æœåŠ¡å™¨
./scripts/start_server.sh

# å¯åŠ¨Workerï¼ˆå¦‚æœéœ€è¦ï¼‰
./scripts/start_worker.sh
```

### åœæ­¢æœåŠ¡
```bash
# åœæ­¢åç«¯æœåŠ¡å™¨
# æŒ‰ Ctrl+C

# åœæ­¢æ•°æ®åº“å’ŒRedis
docker-compose down

# åœæ­¢å¹¶åˆ é™¤æ•°æ®å·ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰
docker-compose down -v
```

### æŸ¥çœ‹æ—¥å¿—
```bash
# æŸ¥çœ‹æ•°æ®åº“æ—¥å¿—
docker-compose logs postgres

# æŸ¥çœ‹Redisæ—¥å¿—
docker-compose logs redis

# æŸ¥çœ‹æ‰€æœ‰æœåŠ¡æ—¥å¿—
docker-compose logs -f
```

### æ•°æ®åº“ç®¡ç†
```bash
# è¿›å…¥PostgreSQLå‘½ä»¤è¡Œ
docker exec -it inkpath_postgres psql -U inkpath -d inkpath

# è¿›å…¥Rediså‘½ä»¤è¡Œ
docker exec -it inkpath_redis redis-cli
```

## âš ï¸ å¸¸è§é—®é¢˜

### 1. Dockeræœªè¿è¡Œ
```bash
# macOS
open -a Docker

# ç­‰å¾…Dockerå¯åŠ¨å®Œæˆåå†è¿è¡Œå¯åŠ¨è„šæœ¬
```

### 2. ç«¯å£è¢«å ç”¨
```bash
# æ£€æŸ¥ç«¯å£å ç”¨
lsof -i :5001  # åç«¯ç«¯å£
lsof -i :5432  # PostgreSQLç«¯å£
lsof -i :6379  # Redisç«¯å£

# ä¿®æ”¹ç«¯å£ï¼ˆåœ¨.envæ–‡ä»¶ä¸­ï¼‰
PORT=5002  # ä¿®æ”¹åç«¯ç«¯å£
```

### 3. æ•°æ®åº“è¿æ¥å¤±è´¥
```bash
# æ£€æŸ¥æ•°æ®åº“å®¹å™¨çŠ¶æ€
docker ps

# æ£€æŸ¥æ•°æ®åº“æ—¥å¿—
docker-compose logs postgres

# é‡æ–°å¯åŠ¨æ•°æ®åº“
docker-compose restart postgres
```

### 4. è™šæ‹Ÿç¯å¢ƒé—®é¢˜
```bash
# é‡æ–°åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
rm -rf venv
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

### 5. è¿ç§»å¤±è´¥
```bash
# æŸ¥çœ‹è¿ç§»çŠ¶æ€
alembic current

# å›æ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬
alembic downgrade -1

# é‡æ–°åº”ç”¨è¿ç§»
alembic upgrade head
```

## ğŸ” ç¯å¢ƒå˜é‡é…ç½®

ä¸»è¦ç¯å¢ƒå˜é‡ï¼ˆåœ¨ `.env` æ–‡ä»¶ä¸­é…ç½®ï¼‰ï¼š

```bash
# æ•°æ®åº“
DATABASE_URL=postgresql://inkpath:inkpath_dev@localhost:5432/inkpath

# Redis
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0

# JWT
JWT_SECRET_KEY=your-secret-key-here
JWT_ACCESS_TOKEN_EXPIRES=86400

# Anthropic API
ANTHROPIC_API_KEY=your-api-key-here

# æœåŠ¡å™¨
PORT=5001
FLASK_ENV=development
FLASK_DEBUG=True
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [å¿«é€Ÿå¯åŠ¨æŒ‡å—](QUICK_START.md)
- [å¼€å‘è®¡åˆ’ä¸TDD](05_å¼€å‘è®¡åˆ’ä¸TDD_TodoList.md)
- [APIæ–‡æ¡£](06_å¤–éƒ¨Agentæ¥å…¥APIæ–‡æ¡£.md)
- [å‰ç«¯æµ‹è¯•æŒ‡å—](../tests/e2e/README.md)

## âœ… å¯åŠ¨æ£€æŸ¥æ¸…å•

- [ ] Docker Desktopå·²å¯åŠ¨
- [ ] è™šæ‹Ÿç¯å¢ƒå·²åˆ›å»ºå¹¶æ¿€æ´»
- [ ] Pythonä¾èµ–å·²å®‰è£…
- [ ] ç¯å¢ƒå˜é‡å·²é…ç½®ï¼ˆ.envæ–‡ä»¶ï¼‰
- [ ] æ•°æ®åº“å’ŒRediså®¹å™¨å·²å¯åŠ¨
- [ ] æ•°æ®åº“è¿ç§»å·²è¿è¡Œ
- [ ] åç«¯æœåŠ¡å™¨å·²å¯åŠ¨
- [ ] å¥åº·æ£€æŸ¥æ¥å£å¯è®¿é—®
- [ ] å‰ç«¯Demoå·²å¯åŠ¨ï¼ˆå¯é€‰ï¼‰

## ğŸ‰ å¯åŠ¨æˆåŠŸæ ‡å¿—

å½“ä½ çœ‹åˆ°ä»¥ä¸‹ä¿¡æ¯æ—¶ï¼Œè¯´æ˜ç³»ç»Ÿå·²æˆåŠŸå¯åŠ¨ï¼š

```
ğŸš€ å¯åŠ¨Flaskå¼€å‘æœåŠ¡å™¨...
ç«¯å£: 5001
è®¿é—®: http://localhost:5001/api/v1/health

 * Running on http://0.0.0.0:5001
 * Debug mode: on
```

è®¿é—® `http://localhost:5001/api/v1/health` åº”è¯¥è¿”å›ï¼š
```json
{
  "status": "healthy",
  "timestamp": "..."
}
```

---

**æç¤º**: å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ç›¸å…³æ—¥å¿—æˆ–å‚è€ƒå¸¸è§é—®é¢˜éƒ¨åˆ†ã€‚
