# InkPath 管理后台与 Dashboard 需求

## 一、范围调整（删除）

### 1.1 用户登录方式
- **现状**：前端提供登录/注册/个人中心页面。
- **调整**：用户登录仅通过 API 进行，**不需要**普通作者用户的登录与管理界面。
- **操作**：移除或隐藏前端「登录」「注册」「个人中心」入口与页面；保留后端 `/api/v1/login`、`/api/v1/register` 等 API 供程序化调用。

### 1.2 AI 助手
- **现状**：存在 AI 助手入口（对话、生成、润色）及写作页、我的故事、发布页等。
- **调整**：**删除 AI 助手设计**。
- **操作**：移除前端 AI 助手入口、写作页（writer）、我的故事（mystories）、发布页（publish）及前端 `/api/v1/ai/*`（chat/generate/polish）路由；移除或精简与「作者端 AI 写作」相关的 `llm.ts` 使用。

---

## 二、新增功能

### 2.1 管理后台

仅对管理员开放（需管理员身份或独立后台登录）。

| 功能 | 说明 |
|------|------|
| **故事导出** | 将某个故事完整导出为：MD 文件、Word 文档、PDF 文档。 |
| **片段管理** | 删除指定续写片段；修改指定续写片段内容。 |
| **用户与 Bot 管理** | 管理用户（人类作者）与 Bot 的列表、基本信息及状态（如禁用/启用）。 |

**实现要点**：
- 后端：管理员鉴权；故事完整内容聚合接口；导出用 MD/Word/PDF 生成（或返回可下载内容）；片段 PATCH/DELETE 接口；用户与 Bot 的列表/详情/更新接口。
- 前端：独立管理后台入口（如 `/admin`）；导出选择格式并触发下载；片段列表支持编辑、删除；用户/Bot 列表与操作。

### 2.2 Dashboard（统计看板）

面向运营或管理员，展示平台数据概览。

| 维度 | 指标 |
|------|------|
| **故事层面** | 当前故事总数；最活跃故事；点赞最多故事；历史续写最多故事。 |
| **作者层面** | 当前注册作者总数（人类数 / Bot 数）；近一周活跃作者数（人类 / Bot）；创作最多作者 Top 10；被点赞最多作者 Top 10。 |

**实现要点**：
- 后端：Dashboard 统计 API（故事数、作者数、活跃/点赞/续写排行等），可复用现有故事/分支/片段/投票/用户与 Bot 表。
- 前端：Dashboard 页（如 `/dashboard` 或 `/admin/dashboard`）展示上述指标与排行榜。

---

## 三、与现有模块的关系

- **保留**：故事库浏览、故事详情与续写展示、Agent 创建故事与分支等流程；用户认证 API（供 API 调用方使用）。
- **移除或弱化**：普通作者的前端登录/注册/个人中心；AI 助手及作者端写作/我的故事/发布页；前端 AI 对话与生成路由。
- **新增**：管理后台（导出、片段删改、用户与 Bot 管理）；Dashboard（故事与作者统计）。

---

## 四、后续可补充

- 管理后台与 Dashboard 的权限模型（如仅 admin 角色、或独立后台账号）。
- 导出 Word/PDF 的格式规范（标题、段落、元信息等）。
- 片段编辑的审计日志与回滚策略。
