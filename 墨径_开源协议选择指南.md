# 墨径 (InkPath) — 开源协议选择指南

---

## 核心问题

你的需求很明确：
1. **保持主导性** — 别人不能拿你的代码另起炉灶、变成你的竞争对手
2. **保留商业化权利** — 未来如果要做 Pro 版、SaaS 托管、企业版，不能被协议限制
3. **吸引社区贡献** — 协议不能太严格导致开发者不愿意参与

这三个目标之间存在天然的张力。太宽松的协议（比如 MIT）保护不了你的商业利益，太严格的协议（比如纯 AGPL）又会吓跑企业用户。2025-2026 年主流的解决方案是 **双协议模型（Dual Licensing）**，核心代码用 AGPL-3.0，同时提供商业协议给不想受限的用户。

---

# 一、推荐方案：AGPL-3.0 + 商业协议双授权

## 1.1 这是什么

双授权模型中，开发者开发软件并在开源协议下提供，同时也在单独的商业协议下提供。商业版本可以授权来资助免费开源版本的持续开发。

具体到墨径：
- **社区版**：用 AGPL-3.0 开源，代码公开，任何人都能自己部署
- **商业版**：用专有协议，付费购买，不受 AGPL 限制

两个版本的代码可以是同一份（纯双授权），也可以商业版包含额外功能（Open Core 模型）。

## 1.2 为什么这个组合适合墨径

**AGPL-3.0 的独特优势：**

AGPL 与 GPL 的关键区别在于网络使用也算作分发。如果你修改了代码并通过网络向付费用户提供访问（SaaS 模式），根据 GPL v3 这个修改会变成专有的，因为它没有被技术上"分发"。但根据 AGPL，你必须向用户提供源代码。

换句话说：
- 别人可以用墨径代码搭自己的平台 → 但他们必须开源自己的修改
- 如果他们想做 SaaS（卖托管服务给客户） → 必须把代码公开
- **这就堵住了"拿你的代码去做竞品 SaaS 但不回馈社区"的路**

同时，AGPL 允许商业使用，包括对软件访问收费的可能性。所以你自己用 AGPL 代码做 SaaS 完全合法——只是你要把源代码公开（这恰好就是你开源的目的）。

**商业协议的作用：**

给那些**不想开源自己修改**的企业提供一条路——他们付费买商业协议，就能绕过 AGPL 的限制。这成为你的收入来源之一。

## 1.3 实际案例

Cal、Plausible、ParadeDB、Lago、Shopware 等项目最近都切换到了 AGPL-3.0 + 商业协议双授权模型。

Spree Commerce 从 BSD-3-Clause 切换到 AGPL-3.0，同时引入商业协议。对于大多数用户（为自己或客户搭建单租户站点），一切保持免费。但如果要做 SaaS 多租户服务，要么开源修改，要么购买商业协议。

Flask 开发者 Armin Ronacher 指出 AGPL 在创业社区中是"可怕的成功"，作为"双商业授权的载体"，MongoDB、RethinkDB、SugarCRM、WURFL 都用过这个模式。

## 1.4 这个模型的实际法律含义

对于墨径来说，这意味着：

| 用户类型 | 使用场景 | 协议选择 | 需要做的事 |
|---------|---------|---------|----------|
| 个人/开发者 | 自己玩、研究、改进 | AGPL-3.0（免费） | 如果公开部署，必须提供源代码下载链接 |
| 企业内部使用 | 部署给自己公司用 | AGPL-3.0（免费） | 如果应用只在组织内网运行，AGPL 不触发源代码公开要求 |
| 开源社区贡献者 | Fork 后改进并公开 | AGPL-3.0（免费） | 必须把修改也用 AGPL 开源 |
| SaaS 竞品 | 拿墨径代码做托管服务卖钱 | 必须买商业协议 | 否则违反 AGPL，必须公开全部修改 |
| 企业定制 | 修改后给客户部署但不想开源 | 必须买商业协议 | 否则违反 AGPL |

---

# 二、其他候选协议对比

以下是你可能考虑的其他协议，以及为什么它们不如 AGPL + 商业协议适合墨径。

## 2.1 MIT / Apache-2.0（宽松协议）

**优点：**
- 社区接受度最高
- 企业最愿意用（Google、Meta 这些公司的内部政策通常允许）
- 贡献者多

**致命缺点：**
- **完全保护不了你的商业利益**
- 任何人都能拿你的代码做 SaaS，不需要回馈社区，也不需要付费
- 你的竞品可以直接基于你的代码搭起来，然后闭源改进

**结论：** 不适合墨径。你在商业化文档里提到想做 Open Core 模型，MIT/Apache 协议根本守不住付费功能的边界——别人可以直接复制你的核心然后自己加功能。

## 2.2 GPL-3.0（强 Copyleft，但没有网络条款）

**优点：**
- 强制衍生作品开源
- 保护社区贡献不会被闭源商业化

**缺点：**
- **有 SaaS 漏洞**：别人拿你的代码做 SaaS，只要不"分发"二进制文件，就不需要开源修改
- GPL v3 在 SaaS 场景下，修改版本会变成专有的，因为它没有被技术上分发

**结论：** 不如 AGPL。AGPL 就是为了堵住这个漏洞而生的。

## 2.3 BSL（Business Source License）

**这是什么：**
BSL 1.1 是一个源码可用协议，允许复制、修改、再分发、非商业使用，以及特定条件下的商业使用。HashiCorp、Cockroach Labs、MariaDB、Sentry 等公司都采用了这种协议。

BSL 的核心机制是：**代码现在不是开源的，但 X 年后自动转成开源协议**（通常是 3-4 年后转 Apache-2.0 或 GPL）。

**优点：**
- 直接禁止竞品使用（你可以定义什么算"竞品"）
- 保留完全的商业控制权

**缺点：**
- **不被 OSI 认可为"开源"**，社区对它有争议
- MariaDB 设计的商业源码协议（BUSL）在特定年数后才会转成真正的开源协议，这引发了一些关于是否真正属于开源的争论
- 吸引贡献者的能力比真开源协议弱

**结论：** 如果你不在乎"开源"这个标签，BSL 是个选择。但如果你想建立真正的开源社区，BSL 会让很多人犹豫。

## 2.4 SSPL（Server Side Public License）

**这是什么：**
MongoDB 从 AGPL 转到 SSPL，这是 MongoDB 自己创造的协议。SSPL 要求那些将软件作为服务提供给第三方的人，必须公开所有用于运行该服务的软件的源代码（包括管理软件、UI、API、自动化软件、监控软件、备份软件等）。

**优点：**
- 比 AGPL 还严格——要求公开整个技术栈
- 更强力地阻止云厂商白嫖

**致命缺点：**
- **不被 OSI 认可为开源**
- Debian 和 Fedora 都禁用了 SSPL，称该协议意图是歧视云计算提供商
- 社区抵触非常强烈

**结论：** 不适合墨径。SSPL 是大公司（MongoDB、Redis）被云厂商逼急了才用的核武器，对于一个新项目来说杀伤力太大，社区根本不会接受。

---

# 三、具体实施方案

## 3.1 代码仓库结构

```
inkpath/
├── community/            # 社区版（AGPL-3.0）
│   ├── LICENSE          # AGPL-3.0 全文
│   ├── backend/
│   ├── frontend/
│   └── README.md        # 说明这是 AGPL 版本
│
├── enterprise/          # 商业版（专有协议，闭源或部分开源）
│   ├── LICENSE          # 商业协议全文
│   ├── advanced-analytics/
│   ├── sso-integration/
│   └── white-label/
│
└── README.md            # 根目录说明双协议模型
```

或者更简单的方式（Open Core 单仓库）：

```
inkpath/
├── LICENSE              # AGPL-3.0
├── LICENSE.commercial   # 商业协议文本
├── core/                # 核心功能（AGPL-3.0）
├── pro/                 # Pro 功能（需要商业协议才能使用）
└── README.md
```

## 3.2 LICENSE 文件模板

### AGPL-3.0 版本（community/LICENSE）

```
GNU AFFERO GENERAL PUBLIC LICENSE
Version 3, 19 November 2007

Copyright (C) 2026 [你的名字或公司名]

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as published
by the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
GNU Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public License
along with this program. If not, see <https://www.gnu.org/licenses/>.

---

ADDITIONAL PERMISSIONS (Optional)

If you wish to use this software in a commercial product or service
without the obligations of the AGPL-3.0, please contact us for a
commercial license: [你的联系邮箱]
```

### 商业协议版本（LICENSE.commercial）

```
INKPATH COMMERCIAL LICENSE
Version 1.0

Copyright (C) 2026 [你的名字或公司名]

This license grants you the right to use, modify, and distribute
InkPath software for commercial purposes without the restrictions
of the GNU AGPL-3.0, subject to the following terms:

1. LICENSE GRANT
   You are granted a non-exclusive, non-transferable license to use
   the InkPath software in your commercial products or services.

2. RESTRICTIONS
   - You may not sublicense or redistribute the software under this
     commercial license to third parties.
   - This license does not grant you patent rights.

3. FEES
   License fees are determined by the scope of use. Contact us for
   a quote: [你的联系邮箱]

4. TERMINATION
   This license terminates automatically if you violate its terms.

5. NO WARRANTY
   The software is provided "as is" without warranty of any kind.

For full terms and pricing, visit: [你的网站]
```

## 3.3 README 中的协议说明

在根目录 README.md 中，清晰地告知用户双协议的存在：

```markdown
# 墨径 (InkPath) — AI 协作故事接龙平台

## 📜 许可证

墨径采用 **双协议模型**：

### 1. 社区版（AGPL-3.0）
- ✅ 免费使用、修改、分发
- ✅ 适用于个人、开源项目、研究用途
- ⚠️ 如果你公开部署（包括 SaaS），必须公开源代码
- 📖 [查看完整协议](LICENSE)

### 2. 商业协议
- ✅ 无需公开源代码
- ✅ 适用于企业内部部署、SaaS 服务、定制开发
- 💰 需要购买商业许可证
- 📧 获取报价：[commercial@inkpath.io](mailto:commercial@inkpath.io)

**不确定该用哪个？**
- 你自己玩或做开源项目 → AGPL-3.0
- 你要做 SaaS 卖给客户但不想开源 → 商业协议
- 你在公司内网部署给员工用 → AGPL-3.0（内网不触发公开要求）
```

---

# 四、常见问题

## Q1: AGPL 会不会吓跑企业用户？

Google 完全禁止在公司内使用任何 AGPL 软件。是的，有些大公司有这样的政策。但这恰好是**商业协议的价值所在**——那些真正想用但不愿意开源的企业，会成为你的付费客户。

同时，AGPL 目前只在不到 1% 的开源项目中使用，所以它确实比 MIT/Apache 更激进。但 2025-2026 年的趋势是越来越多平台类项目采用这个模型（见上面的案例）。

## Q2: 我可以从 AGPL 改成其他协议吗?

可以，但很复杂。如果项目 100% 是你写的，你有完全的版权，想改就改。但如果有社区贡献者，你需要所有贡献者同意才能改协议（或者删掉他们的代码）。

MongoDB、Elastic、Redis Labs 等公司都转换过协议，但这在开源社区引发了争议。所以**从一开始就选对协议非常重要**。

## Q3: 我自己用 AGPL 代码做 SaaS 需要买自己的商业协议吗？

不需要。AGPL 允许商业使用，包括对软件访问收费。你用自己的代码做 SaaS 完全合法——唯一的要求是你要公开源代码（这恰好就是你开源的目的）。

## Q4: 什么是"网络交互"的定义？

AGPL 规定：如果你让修改后的软件通过网络向用户提供访问，你必须向这些用户提供源代码。具体来说，如果用户通过浏览器、API、或任何网络协议与你的服务交互，就算"网络访问"。

## Q5: 双协议模型的成功率高吗？

开源服务市场从 2024 年的约 333 亿美元增长到 2025 年的 380.6 亿美元，预计到 2032 年将超过 1050 亿美元。商业开源软件指数（COSSI）追踪了达到至少 1 亿美元收入的商业开源公司，很多都采用类似模型。

---

# 五、最终推荐

**墨径应该使用：AGPL-3.0（社区版）+ 商业协议（企业版）**

理由：
1. ✅ **保护商业利益**：AGPL 阻止别人白嫖你的代码做竞品 SaaS
2. ✅ **保留商业化权利**：你可以同时提供付费的商业协议
3. ✅ **吸引真诚的贡献者**：AGPL 是 OSI 认可的真开源协议，社区接受度远高于 BSL/SSPL
4. ✅ **符合 2025-2026 趋势**：Cal、Plausible、Spree 等同类平台都在用这个模型

从一开始就用这个模型，避免未来改协议的麻烦。清晰地在 README 里说明双协议，让用户自己选择适合的路径。
